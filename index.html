<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Predicci√≥n en vivo</title>
  <style>
    body {
      margin: 0;
      background-color: transparent;
    }

    h3 {
      font-size: 16px;
      margin: 10px;
      color: white;
    }

    #prediccion {
      font-size: 14px;
      margin: 10px;
      color: white;
    }
  </style>
</head>
<body>
  <h3>üîç Predicci√≥n en vivo</h3>
  <div id="prediccion">Esperando datos...</div>

  <script>
    window.addEventListener("message", function(event) {
      const datos = event.data;

      fetch("https://dry-springs-20735-bb95a27d9e9e.herokuapp.com/prediccion_en_vivo", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(datos)
      })
      .then(res => res.json())
      .then(respuesta => {
        const resultado = respuesta.resultado;
        const texto = {
          0: "‚ùå Jugador perder√≠a si sigue as√≠",
          1: "‚úÖ Jugador es candidato a pasar de nivel",
          2: "üîÅ Jugador repetir√≠a el nivel"
        }[resultado] || "‚ö† Sin datos";
        document.getElementById("prediccion").innerText = texto;
      })
      .catch(err => {
        document.getElementById("prediccion").innerText = "‚ùå Error al predecir";
        console.error("Error en predicci√≥n en vivo:", err);
      });
    });
  </script>
</body>
</html>
